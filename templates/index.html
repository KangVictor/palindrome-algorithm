<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>palindrome web app</title>
</head>
<body>

	<!--
		id = set a reference for javascript to find this element
	-->
	<form id="submit-words" action="/words" method="POST">
		<input type="text" placeholder="words go here" name="words_input"> <br>
		<input type="submit" name="submit">
	</form>

	<textarea id = "MyTextArea" rows="10" cols="50" placeholder="example: dad is a palindrome">

	</textarea>

	<script>
		// get a reference to the form
		const form = document.querySelector('#submit-words');
		const words_input = form.querySelector("[name=words_input]");
		// listen for submit event
		form.addEventListener('submit', (event) => {
			// prevent the default behavior
			event.preventDefault();
			const url = '/words';
			const body = JSON.stringify({words_input: words_input.value});
			const options = {
				method: 'POST',
				body,
				headers: {//headers needed
					"Content-Type": "application/json"
				}
			};

			fetch(url, options)
			.then((response) => {
				return response.json();
			})
			.then((data) => {
				const words_input = data.words_input;
				if (words_input == 'input sccessful') {
					const myText = document.querySelector('#MyTextArea');
					myText.innerHTML = 'input successful';
				} else {
					console.error("input failure");
				}
			})
			.catch((error) => console.error(error));
		});
	</script>
</body>
</html>